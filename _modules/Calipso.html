<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Calipso &#8212; VOCAL 1.17.8 documentation</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.17.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          VOCAL</a>
        <span class="navbar-text navbar-version pull-left"><b>1.17.8</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Index <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Program Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingdata.html">Getting the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supporteddata.html">Supported Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/startdev.html">Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/conventions.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/enviroment.html">Development Enviroment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/docs.html">Building and Writing Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/site.html">Updating The Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/modules.html">Code Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../trouble/faq.html">Troubleshoot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trouble/issuetracker.html">Submit Bugs or Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trouble/contact.html">Contact</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <h1>Source code for Calipso</h1><div class="highlight"><pre>
<span></span><span class="c1">#Notices:</span>
<span class="c1">#Copyright 2017 United States Government as represented by the Administrator of the National Aeronautics and Space Administration. All Rights Reserved.</span>
 
<span class="c1">#Disclaimers</span>
<span class="c1">#No Warranty: THE SUBJECT SOFTWARE IS PROVIDED &quot;AS IS&quot; WITHOUT ANY WARRANTY OF ANY KIND, EITHER EXPRESSED, IMPLIED, OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, ANY WARRANTY THAT THE SUBJECT SOFTWARE WILL CONFORM TO SPECIFICATIONS, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR FREEDOM FROM INFRINGEMENT, ANY WARRANTY THAT THE SUBJECT SOFTWARE WILL BE ERROR FREE, OR ANY WARRANTY THAT DOCUMENTATION, IF PROVIDED, WILL CONFORM TO THE SUBJECT SOFTWARE. THIS AGREEMENT DOES NOT, IN ANY MANNER, CONSTITUTE AN ENDORSEMENT BY GOVERNMENT AGENCY OR ANY PRIOR RECIPIENT OF ANY RESULTS, RESULTING DESIGNS, HARDWARE, SOFTWARE PRODUCTS OR ANY OTHER APPLICATIONS RESULTING FROM USE OF THE SUBJECT SOFTWARE.  FURTHER, GOVERNMENT AGENCY DISCLAIMS ALL WARRANTIES AND LIABILITIES REGARDING THIRD-PARTY SOFTWARE, IF PRESENT IN THE ORIGINAL SOFTWARE, AND DISTRIBUTES IT &quot;AS IS.&quot;</span>
 
<span class="c1">#Waiver and Indemnity:  RECIPIENT AGREES TO WAIVE ANY AND ALL CLAIMS AGAINST THE UNITED STATES GOVERNMENT, ITS CONTRACTORS AND SUBCONTRACTORS, AS WELL AS ANY PRIOR RECIPIENT.  IF RECIPIENT&#39;S USE OF THE SUBJECT SOFTWARE RESULTS IN ANY LIABILITIES, DEMANDS, DAMAGES, EXPENSES OR LOSSES ARISING FROM SUCH USE, INCLUDING ANY DAMAGES FROM PRODUCTS BASED ON, OR RESULTING FROM, RECIPIENT&#39;S USE OF THE SUBJECT SOFTWARE, RECIPIENT SHALL INDEMNIFY AND HOLD HARMLESS THE UNITED STATES GOVERNMENT, ITS CONTRACTORS AND SUBCONTRACTORS, AS WELL AS ANY PRIOR RECIPIENT, TO THE EXTENT PERMITTED BY LAW.  RECIPIENT&#39;S SOLE REMEDY FOR ANY SUCH MATTER SHALL BE THE IMMEDIATE, UNILATERAL TERMINATION OF THIS AGREEMENT.</span>

<span class="c1">##########################</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#   @Author: Grant Mercer</span>
<span class="c1">#   @Author: Nathan Qian</span>
<span class="c1">##########################</span>
<span class="kn">from</span> <span class="nn">tools.vocalDataBlock</span> <span class="k">import</span> <span class="n">VocalDataBlock</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;tkAgg&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">Tkconstants</span> <span class="k">import</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="n">END</span><span class="p">,</span> <span class="n">DISABLED</span>
<span class="kn">from</span> <span class="nn">Tkinter</span> <span class="k">import</span> <span class="n">Tk</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Toplevel</span><span class="p">,</span> <span class="n">Menu</span><span class="p">,</span> <span class="n">PanedWindow</span><span class="p">,</span> \
    <span class="n">Frame</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">BOTH</span><span class="p">,</span> <span class="n">VERTICAL</span><span class="p">,</span> <span class="n">TOP</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> \
    <span class="n">SUNKEN</span><span class="p">,</span> <span class="n">StringVar</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">IntVar</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="k">import</span> <span class="n">platform</span> <span class="k">as</span> <span class="n">_platform</span>
<span class="kn">from</span> <span class="nn">tkColorChooser</span> <span class="k">import</span> <span class="n">askcolor</span>
<span class="kn">import</span> <span class="nn">tkFileDialog</span>
<span class="kn">import</span> <span class="nn">tkMessageBox</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>

<span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">dirname</span>
<span class="kn">from</span> <span class="nn">attributesdialog</span> <span class="k">import</span> <span class="n">AttributesDialog</span>
<span class="kn">from</span> <span class="nn">bokeh.colors</span> <span class="k">import</span> <span class="n">white</span>
<span class="kn">from</span> <span class="nn">constants</span> <span class="k">import</span> <span class="n">Plot</span><span class="p">,</span> <span class="n">PATH</span><span class="p">,</span> <span class="n">ICO</span><span class="p">,</span> <span class="n">CONF</span>
<span class="kn">import</span> <span class="nn">constants</span>
<span class="kn">from</span> <span class="nn">extractdialog</span> <span class="k">import</span> <span class="n">ExtractDialog</span>
<span class="kn">from</span> <span class="nn">importdialog</span> <span class="k">import</span> <span class="n">ImportDialog</span>
<span class="kn">from</span> <span class="nn">settingsdialog</span> <span class="k">import</span> <span class="n">SettingsDialog</span>
<span class="kn">from</span> <span class="nn">log.log</span> <span class="k">import</span> <span class="n">logger</span><span class="p">,</span> <span class="n">error_check</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> <span class="k">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="k">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">plot.plot_depolar_ratio</span> <span class="k">import</span> <span class="n">render_depolarized</span>
<span class="kn">from</span> <span class="nn">plot.plot_backscattered</span> <span class="k">import</span> <span class="n">render_backscattered</span>
<span class="kn">from</span> <span class="nn">plot.plot_vfm</span> <span class="k">import</span> <span class="n">render_vfm</span>
<span class="kn">from</span> <span class="nn">plot.plot_iwp</span> <span class="k">import</span> <span class="n">render_iwp</span>
<span class="kn">from</span> <span class="nn">plot.plot_horiz_avg</span> <span class="k">import</span> <span class="n">render_horiz_avg</span>
<span class="kn">from</span> <span class="nn">plot.plot_aerosol_subtype</span> <span class="k">import</span> <span class="n">render_aerosol_subtype</span>
<span class="kn">from</span> <span class="nn">polygon.manager</span> <span class="k">import</span> <span class="n">ShapeManager</span>
<span class="kn">from</span> <span class="nn">tools.linearalgebra</span> <span class="k">import</span> <span class="n">distance</span>
<span class="kn">from</span> <span class="nn">tools.navigationtoolbar</span> <span class="k">import</span> <span class="n">NavigationToolbar2CALIPSO</span>
<span class="kn">from</span> <span class="nn">tools.optionmenu</span> <span class="k">import</span> <span class="n">ShapeOptionMenu</span>
<span class="kn">from</span> <span class="nn">tools.tools</span> <span class="k">import</span> <span class="n">Catcher</span><span class="p">,</span> <span class="n">center</span>
<span class="kn">from</span> <span class="nn">toolswindow</span> <span class="k">import</span> <span class="n">ToolsWindow</span>
<span class="kn">from</span> <span class="nn">db</span> <span class="k">import</span> <span class="n">db</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="k">import</span> <span class="n">ImageTk</span>
<span class="kn">from</span> <span class="nn">tools.tooltip</span> <span class="k">import</span> <span class="n">create_tool_tip</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>

<div class="viewcode-block" id="Calipso"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso">[docs]</a><span class="k">class</span> <span class="nc">Calipso</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main class of the application, handles all GUI related events as well as</span>
<span class="sd">    creating other GUI windows such as the toolbar or import dialog</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">############################################################</span>
    <span class="c1">#   Initialization functions</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_img</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">PATH</span> <span class="o">+</span> <span class="s1">&#39;/ico/load.png&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_img</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">PATH</span> <span class="o">+</span> <span class="s1">&#39;/ico/save.png&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span> <span class="o">=</span> <span class="n">r</span>  <span class="c1"># Root of program</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># Current file in use</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>  <span class="c1"># X and Y range for scrolling plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pany</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Pan values for shifting map</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">baseplot</span>  <span class="c1"># Current selected plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__label_file_dialog</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_file_flag</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_menu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape_var</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span> <span class="o">=</span> <span class="n">VocalDataBlock</span><span class="p">(</span><span class="s1">&#39;Empty&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">=</span> <span class="n">IntVar</span><span class="p">()</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Screen resolution: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;x&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>

        <span class="n">base_pane</span> <span class="o">=</span> <span class="n">PanedWindow</span><span class="p">()</span>
        <span class="n">base_pane</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">sectioned_pane</span> <span class="o">=</span> <span class="n">PanedWindow</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">base_pane</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sectioned_pane</span><span class="p">)</span>
        <span class="n">top_paned_window</span> <span class="o">=</span> <span class="n">PanedWindow</span><span class="p">(</span><span class="n">sectioned_pane</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">sectioned_pane</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">top_paned_window</span><span class="p">)</span>

        <span class="c1"># Frame to hold dialog for browsing files</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">top_paned_window</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">top_paned_window</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">)</span>

        <span class="c1"># Bottom half the screen</span>
        <span class="n">bottom_paned_window</span> <span class="o">=</span> <span class="n">PanedWindow</span><span class="p">(</span><span class="n">sectioned_pane</span><span class="p">)</span>
        <span class="n">sectioned_pane</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bottom_paned_window</span><span class="p">)</span>

        <span class="c1"># The frame on which we will set out canvas for drawing etc.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">bottom_paned_window</span><span class="p">,</span>
                                      <span class="n">width</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">,</span>
                                      <span class="n">height</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span><span class="p">)</span>

        <span class="c1"># Matplotlib backend objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">set_tight_layout</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">,</span>
                                                   <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_frame</span><span class="p">)</span>
        <span class="c1"># Create ToolsWindow class and pass itself + the root</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Creating ToolsWindow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span> <span class="o">=</span> <span class="n">ToolsWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Creating ShapeManager&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span> <span class="o">=</span> <span class="n">ShapeManager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Binding matplotlib backend to canvas and frame&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2CALIPSO</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">coordinate_frame</span><span class="p">)</span>

        <span class="c1"># pack and display canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s1">&#39;WM_DELETE_WINDOW&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

<div class="viewcode-block" id="Calipso.setup_menu"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.setup_menu">[docs]</a>    <span class="k">def</span> <span class="nf">setup_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a drop down menu bar at the top of the tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu_bar</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">)</span>

        <span class="c1"># File Menu</span>
        <span class="n">menu_file</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="n">menu_bar</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">menu_file</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Import file&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">import_file</span><span class="p">)</span>
        <span class="n">menu_file</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Save all shapes&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_as_json</span><span class="p">(</span><span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">menu_file</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Settings&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_dialog</span><span class="p">)</span>
        <span class="n">menu_file</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>
        <span class="n">menu_file</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Exit&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu_file</span><span class="p">)</span>

        <span class="c1"># Edit Menu</span>
        <span class="n">menu_edit</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="n">menu_bar</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">menu_edit</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Select all shapes&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">select_all</span><span class="p">)</span>
        <span class="n">menu_edit</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Deselect all shapes&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">)</span>
        <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Edit&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu_edit</span><span class="p">)</span>

        <span class="c1"># Polygon Menu</span>
        <span class="n">menu_polygon</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="n">menu_bar</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Import/Manage Database&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">import_dialog</span><span class="p">)</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Export All to Database&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">export_db</span><span class="p">)</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Export Selected to Database&#39;</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_db</span><span class="p">(</span><span class="n">only_selected</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Create New Database&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Calipso</span><span class="o">.</span><span class="n">create_db</span><span class="p">())</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Select Database&#39;</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Calipso</span><span class="o">.</span><span class="n">select_db</span><span class="p">())</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Import Archive to Database&#39;</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="n">Calipso</span><span class="o">.</span><span class="n">import_json_db</span><span class="p">)</span>
        <span class="n">menu_polygon</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Export Database to Archive&#39;</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="n">Calipso</span><span class="o">.</span><span class="n">export_json_db</span><span class="p">)</span>
        <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Polygon&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu_polygon</span><span class="p">)</span>

        <span class="c1"># View Menu</span>
        <span class="n">menu_views</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="n">menu_bar</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Backscatter 532&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">backscattered</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Depolarization&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">depolarized</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Vertical Feature Mask&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">vfm</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ice Water Phase&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">iwp</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Horizontal Averaging&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                  <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">horiz_avg</span><span class="p">)</span>
        <span class="n">menu_views</span><span class="o">.</span><span class="n">add_radiobutton</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Aerosol Subtype&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="p">,</span>
                                   <span class="n">value</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">aerosol_subtype</span><span class="p">)</span>
        <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Views&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu_views</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>       <span class="c1"># Set initial value to backscatter</span>


        <span class="c1"># Help Menu</span>
        <span class="n">menu_help</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span><span class="n">menu_bar</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">menu_help</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Documentation&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span>
                <span class="n">constants</span><span class="o">.</span><span class="n">HELP_PAGE</span><span class="p">))</span>
        <span class="n">menu_help</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;About&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">about</span><span class="p">)</span>
        <span class="n">menu_bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Help&#39;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu_help</span><span class="p">)</span>

        <span class="c1"># configure menu to screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">menu_bar</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.setup_window"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.setup_window">[docs]</a>    <span class="k">def</span> <span class="nf">setup_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the title of root and places window on screen</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;CALIPSO Visualization Tool (VOCAL)&quot;</span><span class="p">)</span>
        <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
        <span class="n">sh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">sw</span> <span class="o">-</span> <span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">sh</span> <span class="o">-</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="c1"># the child is designed to appear off to the right of the parent window, so the x location</span>
        <span class="c1"># is parentWindow.x + the length of the window + padding, and y is simply the parentWindow.y</span>
        <span class="c1"># plus a fourth the distance of the window</span>
        <span class="k">if</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s2">&quot;linux&quot;</span> <span class="ow">or</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s2">&quot;linux2&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Linux system detected&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">constants</span><span class="o">.</span><span class="n">CHILDWIDTH</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDHEIGHT</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">,</span>
                <span class="n">y</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s1">&#39;darwin&#39;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;OSX system detected&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">constants</span><span class="o">.</span><span class="n">CHILDWIDTH</span> <span class="o">+</span> <span class="mi">75</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDHEIGHT</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">,</span>
                <span class="n">y</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if the main window and the tools window&#39;s width are greater than the screen width</span>
            <span class="k">if</span> <span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDHEIGHT</span> <span class="o">&gt;</span> <span class="n">sw</span><span class="p">:</span>
                <span class="c1"># place the tools window 10/11 from the left of the screen</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">constants</span><span class="o">.</span><span class="n">CHILDWIDTH</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDHEIGHT</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">sw</span> <span class="o">/</span> <span class="mi">11</span> <span class="o">-</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDWIDTH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">y</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># place the tools window 50 units from the the right end of the main window</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">constants</span><span class="o">.</span><span class="n">CHILDWIDTH</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">CHILDHEIGHT</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Placed toolswindow at: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">geometry</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.setup_main_screen"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.setup_main_screen">[docs]</a>    <span class="k">def</span> <span class="nf">setup_main_screen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setup the top GUI, initialize toolbar window and set the plot to a blank image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Creating upper program GUI&#39;</span><span class="p">)</span>
        <span class="c1"># Create label , entry box and browse button</span>
        <span class="n">label_file</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__label_file_dialog</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_frame</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="n">LEFT</span><span class="p">,</span>
                                         <span class="n">bg</span><span class="o">=</span><span class="n">white</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">SUNKEN</span><span class="p">)</span>
        <span class="n">browse_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Browse&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                               <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">import_file</span><span class="p">)</span>
        <span class="n">label_file</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__label_file_dialog</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">browse_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

        <span class="c1"># Load shapes from JSON</span>
        <span class="n">load_button</span> <span class="o">=</span> \
            <span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">load_img</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">)</span>
        <span class="n">load_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">create_tool_tip</span><span class="p">(</span><span class="n">load_button</span><span class="p">,</span> <span class="s1">&#39;Load JSON&#39;</span><span class="p">)</span>

        <span class="c1"># Save shapes as JSON</span>
        <span class="n">save_button</span> <span class="o">=</span> \
            <span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_img</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_as_json</span><span class="p">)</span>
        <span class="n">save_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">create_tool_tip</span><span class="p">(</span><span class="n">save_button</span><span class="p">,</span> <span class="s1">&#39;Save selected</span><span class="se">\n</span><span class="s1"> objects to</span><span class="se">\n</span><span class="s1"> JSON&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">option_menu</span> <span class="o">=</span> <span class="n">ShapeOptionMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape_var</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                           <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">select_shape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_menu</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;ButtonPress-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_shape_optionmenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_menu</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">label_shapes</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dialog_shape_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select&quot;</span><span class="p">)</span>
        <span class="n">label_shapes</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">setup_toolbar_buttons</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting initial plot&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_plot</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">baseplot</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

    <span class="c1">#   end Initialization functions</span>
    <span class="c1">############################################################</span>

    <span class="c1">############################################################</span>
    <span class="c1">#   Exclusive menu bar &amp; top gui functions</span>

<div class="viewcode-block" id="Calipso.update_shape_optionmenu"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.update_shape_optionmenu">[docs]</a>    <span class="k">def</span> <span class="nf">update_shape_optionmenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback function bound to *&lt;ButtonPress-1&gt;* which displays the current list</span>
<span class="sd">        of shapes on the plot to the option menu. All tags are grabbed which can then</span>
<span class="sd">        be selected by the user to see which object they are looking for.</span>

<span class="sd">        :param event: Tkinter passed event object, **ignored**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ops</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_current_list</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_menu</span><span class="o">.</span><span class="n">set_menu</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">select_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">select_from_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

<div class="viewcode-block" id="Calipso.import_file"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.import_file">[docs]</a>    <span class="k">def</span> <span class="nf">import_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load an HDF file for use with displaying backscatter and depolarized images</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Importing HDF file&#39;</span><span class="p">)</span>
        <span class="c1"># function to import HDF file used my open and browse</span>
        <span class="n">file_types</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Data files&#39;</span><span class="p">,</span> <span class="s1">&#39;*.hdf&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="n">file_types</span><span class="p">,</span> <span class="n">initialdir</span><span class="o">=</span><span class="n">CONF</span><span class="o">.</span><span class="n">session_hdf</span><span class="o">.</span><span class="n">dir</span><span class="p">())</span>
        <span class="n">fl</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fl</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">new_file_flag</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="n">fl</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span> <span class="o">=</span> <span class="n">VocalDataBlock</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
            <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__label_file_dialog</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">white</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">SUNKEN</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="n">LEFT</span><span class="p">,</span>
                                            <span class="n">text</span><span class="o">=</span><span class="n">segments</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">CONF</span><span class="o">.</span><span class="n">session_hdf</span><span class="o">.</span><span class="n">change</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.export_db"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.export_db">[docs]</a>    <span class="k">def</span> <span class="nf">export_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">only_selected</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Notify the database that a save is taking place, the</span>
<span class="sd">        db will then save all polygons present on the screen</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Notifying database to save with select flag </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">only_selected</span><span class="p">)))</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">save_db</span><span class="p">(</span><span class="n">only_selected</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Success, saved to db&#39;</span><span class="p">)</span>
            <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;Objects saved to database&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;No objects to be saved&#39;</span><span class="p">)</span>
            <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;No objects to be saved&#39;</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Calipso.create_db"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.create_db">[docs]</a>    <span class="k">def</span> <span class="nf">create_db</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a file browser to create a database file for polygons</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.db&#39;</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Databases&#39;</span><span class="p">,</span> <span class="s1">&#39;*.db&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;initialdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Select Database to Use&#39;</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;initialfile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;CALIPSOdb.db&#39;</span>
        <span class="n">fl</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fl</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
            <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">change</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Calipso.select_db"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.select_db">[docs]</a>    <span class="k">def</span> <span class="nf">select_db</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a file browser to select a database if one is not already chosen</span>

<span class="sd">        :param iscommand: Make True if we are executing from the menu command</span>
<span class="sd">        :return: Return 0 if no file was selected</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.db&#39;</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Databases&#39;</span><span class="p">,</span> <span class="s1">&#39;*.db&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;initialdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Select Database to Use&#39;</span>
        <span class="n">fl</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
        <span class="n">fl</span> <span class="o">=</span> <span class="n">fl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fl</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">set_path</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
            <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">change</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Calipso.import_json_db"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.import_json_db">[docs]</a>    <span class="k">def</span> <span class="nf">import_json_db</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Import the contents of a JSON file to the database, works hand in hand</span>
<span class="sd">        with the ``export_json_db`` class method. This will allows users to share</span>
<span class="sd">        their database without needing to manually move their db file.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.zip&#39;</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Data Archive&#39;</span><span class="p">,</span> <span class="s1">&#39;*.zip&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;initialdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
        <span class="n">fl</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fl</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">log_fname</span> <span class="o">=</span> <span class="n">fl</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Importing database from </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">log_fname</span><span class="p">)</span>
            <span class="n">success</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">import_from_json</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Success, JSON file imported&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;shapes from </span><span class="si">%s</span><span class="s1"> imported &#39;</span> <span class="o">%</span> <span class="n">log_fname</span> <span class="o">+</span>
                                      <span class="s1">&#39;(note: new tags have been assigned to these shapes!)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid JSON file&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;Invalid JSON file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">log_fname</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Calipso.export_json_db"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.export_json_db">[docs]</a>    <span class="k">def</span> <span class="nf">export_json_db</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Export the contents of the database to an archive containing JSON, which can then be</span>
<span class="sd">        loaded into other databases and have all shapes imported</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">askyesno</span><span class="p">(</span><span class="s1">&#39;Export database&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;Database will be exported to a specified&#39;</span> <span class="o">+</span>
                                         <span class="s1">&#39; archive (this operation is a copy, not a move)&#39;</span> <span class="o">+</span>
                                         <span class="s1">&#39; continue?&#39;</span><span class="p">):</span>
            <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.zip&#39;</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;ZIP Files&#39;</span><span class="p">,</span> <span class="s1">&#39;*.zip&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;initialdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONF</span><span class="o">.</span><span class="n">session_db</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
            <span class="n">fl</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fl</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">log_fname</span> <span class="o">=</span> <span class="n">fl</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Dumping database to </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">log_fname</span><span class="p">)</span>
                <span class="n">success</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">dump_to_json</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Success, JSON file created&#39;</span><span class="p">)</span>
                    <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;Database exported to </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">log_fname</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;No objects to be saved&#39;</span><span class="p">)</span>
                    <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;No objects inside database to export to JSON&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Export to database canceled&#39;</span><span class="p">)</span></div>

    <span class="c1"># End menu bar functions</span>
    <span class="c1">############################################################</span>

    <span class="k">def</span> <span class="nf">plot_baseplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__metadata_text</span> <span class="o">=</span> <span class="s2">&quot;Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata</span><span class="se">\n</span><span class="s2">Metadata&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__metadata_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__baseplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__metadata_text</span><span class="p">,</span>
                                      <span class="n">width</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">HEIGHT</span><span class="p">,</span>
                                      <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;LightYellow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__metadata_label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">plot_not_available</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_i</span><span class="p">,</span> <span class="n">in_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanagers</span><span class="p">[</span><span class="n">in_i</span><span class="p">]</span><span class="o">.</span><span class="n">set_plot</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">not_available</span><span class="p">)</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">PATH</span> <span class="o">+</span> <span class="s1">&#39;/dat/grey.jpg&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__figs</span><span class="p">[</span><span class="n">in_i</span><span class="p">]</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__figs</span><span class="p">[</span><span class="n">in_i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Plot currently not available&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__figs</span><span class="p">[</span><span class="n">in_i</span><span class="p">]</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__figs</span><span class="p">[</span><span class="n">in_i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>

<div class="viewcode-block" id="Calipso.set_plot"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.set_plot">[docs]</a>    <span class="k">def</span> <span class="nf">set_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_type</span><span class="p">,</span> <span class="n">xrange_</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">yrange</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws to the canvas according to the *plot_type* specified in the arguments. Accepts one of</span>
<span class="sd">        the attributes below</span>

<span class="sd">        .. py:attribute:: BASE_PLOT</span>
<span class="sd">        .. py:attribute:: BACKSCATTERED</span>
<span class="sd">        .. py:attribute:: DEPOLARIZED</span>
<span class="sd">        .. py:attribute:: VFM</span>
<span class="sd">        .. py:attribute:: IWP</span>
<span class="sd">        .. py:attribute:: HORIZ_AVG</span>
<span class="sd">        .. py:attribute:: AEROSOL_SUBTYPE</span>

<span class="sd">        :param int plot_type: accepts ``BASE_PLOT, BACKSCATTERED, DEPOLARIZED, VFM, IWP, HORIZ_AVG</span>
<span class="sd">        :param list xrange\_: accepts a range of time to plot</span>
<span class="sd">        :param list yrange: accepts a range of altitude to plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span> <span class="o">=</span> <span class="n">xrange_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span> <span class="o">=</span> <span class="n">yrange</span>
        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">baseplot</span><span class="p">:</span>
            <span class="c1"># Hide the axis and print an image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_plot</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">baseplot</span><span class="p">)</span>

            <span class="n">im</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">PATH</span> <span class="o">+</span> <span class="s1">&#39;/dat/CALIPSO.jpg&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">backscattered</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the backscattered plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to backscattered xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_backscattered</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">backscattered</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">backscattered</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s1">&#39;No File Exists&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;Backscattered Plot&#39;</span><span class="p">,</span> <span class="s1">&#39;Index out of bounds&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">depolarized</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the depolarized plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to depolarized xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_depolarized</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">depolarized</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">depolarized</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s2">&quot;No File Exists&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">vfm</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the depolarized plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to vfm xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_vfm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">vfm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">vfm</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s2">&quot;No File Exists&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">iwp</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the depolarized plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to iwp xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_iwp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">iwp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">iwp</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s2">&quot;No File Exists&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">horiz_avg</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the depolarized plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to horiz_avg xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_horiz_avg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">horiz_avg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">horiz_avg</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s2">&quot;No File Exists&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="n">Plot</span><span class="o">.</span><span class="n">aerosol_subtype</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clear any references to the current figure, construct a new figure</span>
                <span class="c1"># and render the depolarized plot to it</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting plot to aerosol_subtype xrange: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">xrange_</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; yrange: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">yrange</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_block</span><span class="o">.</span><span class="n">get_file_name</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Using file &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="c1"># Reset if the file is not empty AND we are using granules from different time/place</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_hdf</span><span class="p">()[</span><span class="o">-</span><span class="mi">25</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">all_</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">clear_refs</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_hdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">render_aerosol_subtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="n">xrange_</span><span class="p">,</span> <span class="n">yrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parent_fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">aerosol_subtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="o">.</span><span class="n">aerosol_subtype</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;IOError, no file exists&#39;</span><span class="p">)</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;File Not Found&#39;</span><span class="p">,</span> <span class="s2">&quot;No File Exists&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Plot Type not yet supported&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.pan"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.pan">[docs]</a>    <span class="k">def</span> <span class="nf">pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves initial coordinates of mouse press when the user begins to pan</span>

<span class="sd">        :param event: Tkinter passed event object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pan point 1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pany</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span></div>

<div class="viewcode-block" id="Calipso.render_pan"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.render_pan">[docs]</a>    <span class="k">def</span> <span class="nf">render_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves ending coordinates of mouse press and proceeds to find the distance</span>
<span class="sd">        between the two points, scrolls the map accordingly</span>

<span class="sd">        :param event: Tkinter passed event object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Pan point 2, finding distance and panning...&#39;</span><span class="p">)</span>
        <span class="c1"># Find distance and add an amplifier of 1.5</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">panx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pany</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">)</span>
        <span class="c1"># If the user is scrolling backwards</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">panx</span> <span class="o">&lt;</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="c1"># Already at beginning</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s1">&#39;Attempting to pan backwards, already at beginning nothing to be done&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="c1"># The end position would be negative</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dst</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Attempting to pan past beginning, setting to beginning&#39;</span><span class="p">)</span>
                <span class="c1"># Set both xrange and dst to zero and simply reload beginning range</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dst</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dst</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dst</span><span class="p">))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Panning backwards&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Panning forwards&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">xrange_</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dst</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dst</span><span class="p">),</span>
                          <span class="n">yrange</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">begin_alt_range_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span>
                                  <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">end_alt_range_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">begin_range_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">end_range_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">begin_range_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__child</span><span class="o">.</span><span class="n">end_range_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>

<div class="viewcode-block" id="Calipso.save_json"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.save_json">[docs]</a>    <span class="k">def</span> <span class="nf">save_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **DEPRECATED**</span>

<span class="sd">        Save all shapes on the map inside a JSON object given a previously</span>
<span class="sd">        saved file. If no file exists prompt for file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Notifying JSON to save&#39;</span><span class="p">)</span>
        <span class="c1"># Save to last saved file, if no file exists prompt to a new file</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">saved</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_filename</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">saved</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_as_json</span><span class="p">()</span>  <span class="c1"># Still prompt for a file name if none currently exists</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">save_json</span><span class="p">()</span>  <span class="c1"># Else do a normal save with internal file</span>
            <span class="k">if</span> <span class="n">saved</span><span class="p">:</span>
                <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapes saved successfully&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;save as JSON&#39;</span><span class="p">,</span> <span class="s1">&#39;No objects to be saved&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.save_as_json"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.save_as_json">[docs]</a>    <span class="k">def</span> <span class="nf">save_as_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save all selected objects on the plot, asking for a filename first</span>

<span class="sd">        if ``save_all`` is specified and set to ``True``, the function will save **all**</span>
<span class="sd">        shapes across **all** plots in the program.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Notifying JSON to save as&#39;</span><span class="p">)</span>
        <span class="c1"># Save to a file entered by user, saveAll saves ALL objects across canvas</span>
        <span class="c1"># and cannot be called as a normal save(must always be save as)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">get_selected_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.json&#39;</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Data files&#39;</span><span class="p">,</span> <span class="s1">&#39;*.json&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">f</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;cancelling save as json&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">save_all</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">save_all_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;No selected objects found, canceling save&#39;</span><span class="p">)</span>
            <span class="n">tkMessageBox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s1">&#39;save as JSON&#39;</span><span class="p">,</span> <span class="s1">&#39;No objects to be saved&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.load"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        load JSON objects from file by calling :py:meth:`polygonlist.readPlot(f)`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Loading JSON&#39;</span><span class="p">)</span>
        <span class="c1"># loads JSON object by calling the polygonList internal readPlot method</span>
        <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;defaultextension&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.json&#39;</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;filetypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CALIPSO Data files&#39;</span><span class="p">,</span> <span class="s1">&#39;*.json&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;All files&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)]</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">tkFileDialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">read_plot</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.about"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.about">[docs]</a>    <span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simple TopLevel window displaying the authors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Opening about window&#39;</span><span class="p">)</span>
        <span class="n">file_window</span> <span class="o">=</span> <span class="n">Toplevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">)</span>
        <span class="n">file_window</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;300x300&quot;</span><span class="p">)</span>
        <span class="n">file_window</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;About&#39;</span><span class="p">)</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">file_window</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ABOUT</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span>

        <span class="n">button_close</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">file_window</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Close&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">file_window</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
        <span class="n">button_close</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="n">center</span><span class="p">(</span><span class="n">file_window</span><span class="p">,</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">))</span></div>

<div class="viewcode-block" id="Calipso.paint"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.paint">[docs]</a>    <span class="k">def</span> <span class="nf">paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens the paint window for specifying the shape&#39;s color</span>

<span class="sd">        :param event: A Tkinter passed event object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">find_shape</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">askcolor</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">red</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;02x&#39;</span><span class="p">)</span>
            <span class="n">green</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;02x&#39;</span><span class="p">)</span>
            <span class="n">blue</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;02x&#39;</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">red</span> <span class="o">+</span> <span class="n">green</span> <span class="o">+</span> <span class="n">blue</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Painting </span><span class="si">%s</span><span class="s1"> -&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">get_tag</span><span class="p">(),</span> <span class="n">color</span><span class="p">))</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">get_itemhandler</span><span class="p">()</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_canvas</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="Calipso.reset"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset all objects on the screen, move pan to original</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting plot&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># reset all shapes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>  <span class="c1"># proc toolbar function to reset plot to home</span></div>

    <span class="c1">############################################################</span>
    <span class="c1">#   The following functions open dialogs which are defined</span>
    <span class="c1">#   in separate files. Dialog should always be treated as</span>
    <span class="c1">#   singletons</span>

<div class="viewcode-block" id="Calipso.attribute_dialog"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.attribute_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">attribute_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open attribute window for specifying attributes on objects</span>

<span class="sd">        :param event: A Tkinter passed event object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Grabbing shape object&#39;</span><span class="p">)</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">find_shape</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Opening attributes dialog&#39;</span><span class="p">)</span>
        <span class="n">AttributesDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">,</span> <span class="n">shape</span><span class="p">)</span><span class="o">.</span> \
            <span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.extract_dialog"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.extract_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">extract_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a subwindow that displays the data bounded by the shape</span>

<span class="sd">        :param event: A Tkinter passed event object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">find_shape</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Extracting data for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">shape</span><span class="o">.</span><span class="n">get_tag</span><span class="p">())</span>
        <span class="n">ExtractDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span><span class="p">)</span><span class="o">.</span> \
            <span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.import_dialog"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.import_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">import_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open the database import window allowing the user to import and</span>
<span class="sd">        delete entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Opening database import window&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">ImportDialog</span><span class="o">.</span><span class="n">singleton</span><span class="p">):</span>
            <span class="n">ImportDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span> \
                <span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Found existing import window, canceling&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.settings_dialog"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.settings_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">settings_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens the settings window allowing the user to manually change the settings in the config</span>
<span class="sd">        file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Opening settings window&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">SettingsDialog</span><span class="o">.</span><span class="n">singleton</span><span class="p">):</span>
            <span class="n">SettingsDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span> \
                <span class="n">wm_iconbitmap</span><span class="p">(</span><span class="n">ICO</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Found existing settings window, canceling&#39;</span><span class="p">)</span></div>


    <span class="c1"># end dialog functions</span>
    <span class="c1">############################################################</span>

<div class="viewcode-block" id="Calipso.get_root"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.get_root">[docs]</a>    <span class="k">def</span> <span class="nf">get_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the root of the application</span>

<span class="sd">        :rtype: A Tkinter root</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root</span></div>

<div class="viewcode-block" id="Calipso.get_shapemanager"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.get_shapemanager">[docs]</a>    <span class="k">def</span> <span class="nf">get_shapemanager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the internal :py:class:`polygonList` object</span>

<span class="sd">        :rtype: :py:class:`polygon.manager.ShapeManager`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span>  <span class="c1"># get functions for private variables</span></div>

<div class="viewcode-block" id="Calipso.get_toolbar"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.get_toolbar">[docs]</a>    <span class="k">def</span> <span class="nf">get_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the internal :py:class:`toolbar` object</span>

<span class="sd">        :rtype: :py:class:`tools.navigationtoolbar.NavigationToolbar2CALIPSO`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolbar</span></div>

<div class="viewcode-block" id="Calipso.get_fig"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.get_fig">[docs]</a>    <span class="k">def</span> <span class="nf">get_fig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the figure that is plotted to the canvas</span>

<span class="sd">        :rtype: :py:class:`SubplotAxes`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Fig does not exist&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Calipso.get_file"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.get_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current HDF file being displayed</span>

<span class="sd">        :type: :py:class:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__file</span></div>

<div class="viewcode-block" id="Calipso.close"><a class="viewcode-back" href="../doc/general/calipso.html#Calipso.Calipso.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the all the shapes are saved. If a shape is unsaved, the</span>
<span class="sd">        program will ask the user whether save or not, and then close the</span>
<span class="sd">        program. Also saves the session settings to the config.json file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Writing session settings&#39;</span><span class="p">)</span>
        <span class="n">CONF</span><span class="o">.</span><span class="n">opened</span><span class="o">.</span><span class="n">change</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">CONF</span><span class="o">.</span><span class="n">write_config</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shapemanager</span><span class="o">.</span><span class="n">is_all_saved</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Unsaved shapes found&#39;</span><span class="p">)</span>
            <span class="n">answer</span> <span class="o">=</span> <span class="n">tkMessageBox</span><span class="o">.</span> \
                <span class="n">askyesnocancel</span><span class="p">(</span><span class="s1">&#39;Close Without Saving&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;There are unsaved shapes on the plot. Save these shapes?&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">answer</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Saving shapes&#39;</span><span class="p">)</span>
                <span class="n">saved</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_json</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">saved</span><span class="p">:</span>
                    <span class="n">error_check</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>
            <span class="k">elif</span> <span class="n">answer</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Dumping unsaved shapes&#39;</span><span class="p">)</span>
                <span class="n">error_check</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">answer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error_check</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    <span class="c1">############################################################</span>
    <span class="c1"># New functions</span>
    <span class="c1">############################################################</span>
    <span class="k">def</span> <span class="nf">goToMain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drawplot_notebook</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__backscattered532_frame</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Debug Level = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">debug_switch</span><span class="p">))</span>

    <span class="c1"># Create Tkinter root and initialize Calipso</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Starting CALIPSO program&#39;</span><span class="p">)</span>
    <span class="n">Tk</span><span class="o">.</span><span class="n">CallWrapper</span> <span class="o">=</span> <span class="n">Catcher</span>
    <span class="n">rt</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Instantiate CALIPSO program&#39;</span><span class="p">)</span>
    <span class="n">program</span> <span class="o">=</span> <span class="n">Calipso</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>

    <span class="c1"># Setup Calipso window</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting up window&#39;</span><span class="p">)</span>
    <span class="n">program</span><span class="o">.</span><span class="n">setup_window</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting up menu&#39;</span><span class="p">)</span>
    <span class="n">program</span><span class="o">.</span><span class="n">setup_menu</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Setting up main screen&#39;</span><span class="p">)</span>
    <span class="n">program</span><span class="o">.</span><span class="n">setup_main_screen</span><span class="p">()</span>

    <span class="c1"># Begin program</span>
    <span class="n">rt</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Terminated CALIPSO program&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Grant Mercer, Nathan Qian.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>