<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Database &#8212; VOCAL 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Extract Dialog" href="extract.html" />
    <link rel="prev" title="Constants" href="consts.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          VOCAL</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Index <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Program Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gettingdata.html">Getting the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supporteddata.html">Supported Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dev/startdev.html">Getting Started Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/conventions.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/enviroment.html">Development Enviroment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/docs.html">Building and Writing Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/site.html">Updating The Site</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Code Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/faq.html">Troubleshoot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/issuetracker.html">Submit Bugs or Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/contact.html">Contact</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Database</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="consts.html" title="Previous Chapter: Constants"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Constants</span>
    </a>
  </li>
  <li>
    <a href="extract.html" title="Next Chapter: Extract Dialog"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Extract Dialog &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../_sources/doc/general/db.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="database">
<h1>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h1>
<img src="../../_images/inheritance-4f536a5d91f76f89afe85dd04569e58e54d21a3a.png" alt="Inheritance diagram of db" usemap="#inheritance53bde99ac8" class="inheritance"/>
<map id="inheritance53bde99ac8" name="inheritance53bde99ac8">
<area shape="rect" id="node1" href="#db.DatabaseManager" target="_top" title="Internally manages the database engine and any sql related objects." alt="" coords="48,55,193,80"/>
<area shape="rect" id="node2" href="#db.DatabasePolygon" target="_top" title="Sqlalchemy class object, contains all data that is stored inside the database." alt="" coords="284,5,427,31"/>
<area shape="rect" id="node3" title="The most base type" alt="" coords="5,5,236,31"/>
</map>
<span class="target" id="module-db"></span><dl class="class">
<dt id="db.DatabaseManager">
<em class="property">class </em><code class="descname">DatabaseManager</code><a class="reference internal" href="../../_modules/db.html#DatabaseManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Internally manages the database engine and any sql related objects.
Hands out sessions with getSession() but only offers abstractions for
other functionality. The database is INDEPENDENT from the application</p>
<dl class="method">
<dt id="db.DatabaseManager.commit_to_db">
<code class="descname">commit_to_db</code><span class="sig-paren">(</span><em>poly_list</em>, <em>time</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.commit_to_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.commit_to_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of polygons and commits them into the database,
used in polygonList to commit all visible polygons</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>poly_list</strong> &#8211; the current polygonList corresponding to the active plot</li>
<li><strong>time</strong> &#8211; time of the JSON&#8217;s creation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.delete_item">
<code class="descname">delete_item</code><span class="sig-paren">(</span><em>idx</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.delete_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.delete_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a session and delete the object from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>idx</strong> &#8211; the primary key for the object passed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.dump_to_json">
<code class="descname">dump_to_json</code><span class="sig-paren">(</span><em>zip_fname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.dump_to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.dump_to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the contents of the database into a JSON file with the specific format
of DatabasePolygon. Creates a directory &#8216;{PROJECT}/tmp&#8217; and exports all db
objects to it, then zips the directory and deletes tmp. Returns <code class="docutils literal"><span class="pre">True</span></code> on
success, <code class="docutils literal"><span class="pre">False</span></code> otherwise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>zip_fname</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; name of the zip file</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="db.DatabaseManager.encode">
<em class="property">static </em><code class="descname">encode</code><span class="sig-paren">(</span><em>filename</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode and write out a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; name of the file</li>
<li><strong>data</strong> &#8211; Python dictionary representation of a JSON</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.exists_tag">
<code class="descname">exists_tag</code><span class="sig-paren">(</span><em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.exists_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.exists_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the database if a tag currently exists, if so return True, else
return False</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.get_session">
<code class="descname">get_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.get_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of a session, USERS job to ensure session
is committed/closed</p>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.import_from_json">
<code class="descname">import_from_json</code><span class="sig-paren">(</span><em>zip_fname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.import_from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.import_from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a <em>.zip</em> file selected by the user, the zip file must be
the same format as how <code class="docutils literal"><span class="pre">dump_to_json</span></code> creates a zip, otherwise
an error will be raised. Uses functionality similar to <code class="docutils literal"><span class="pre">ShapeReader</span></code>,
but as db should <strong>never</strong> be dependent on another class we need to
impl our own import method. The big difference here is that shapes
are not added to the current shape list, instead are only loaded into
the local database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.query_unique_tag">
<code class="descname">query_unique_tag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.query_unique_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.query_unique_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Grabs a session and queries the database to find the starting tag for the application.
this tag is used so it does not overlap existing shape tags previously generated
and stored into the database</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="db.DatabasePolygon">
<em class="property">class </em><code class="descname">DatabasePolygon</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabasePolygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabasePolygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy class object, contains all data that is stored inside the database.
Objects are represented as JSON</p>
<dl class="data">
<dt id="db.DatabasePolygon.id">
<code class="descname">id</code><a class="headerlink" href="#db.DatabasePolygon.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.tag">
<code class="descname">tag</code><a class="headerlink" href="#db.DatabasePolygon.tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.color">
<code class="descname">color</code><a class="headerlink" href="#db.DatabasePolygon.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.time_">
<code class="descname">time_</code><a class="headerlink" href="#db.DatabasePolygon.time_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.hdf">
<code class="descname">hdf</code><a class="headerlink" href="#db.DatabasePolygon.hdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.plot">
<code class="descname">plot</code><a class="headerlink" href="#db.DatabasePolygon.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.attributes">
<code class="descname">attributes</code><a class="headerlink" href="#db.DatabasePolygon.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.coordinates">
<code class="descname">coordinates</code><a class="headerlink" href="#db.DatabasePolygon.coordinates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.notes">
<code class="descname">notes</code><a class="headerlink" href="#db.DatabasePolygon.notes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="data">
<dt id="db.dbBase">
<code class="descname">dbBase</code><em class="property"> = &lt;class 'sqlalchemy.ext.declarative.api.Base'&gt;</em><a class="headerlink" href="#db.dbBase" title="Permalink to this definition">¶</a></dt>
<dd><p>The most base type</p>
</dd></dl>

<dl class="data">
<dt id="db.db">
<code class="descname">db</code><em class="property"> = &lt;db.DatabaseManager object&gt;</em><a class="headerlink" href="#db.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Internally manages the database engine and any sql related objects.
Hands out sessions with getSession() but only offers abstractions for
other functionality. The database is INDEPENDENT from the application</p>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Grant Mercer, Nathan Qian.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>