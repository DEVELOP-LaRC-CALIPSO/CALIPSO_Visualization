

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Database &mdash; VOCAL 0.15.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="VOCAL 0.15.2 documentation" href="../../index.html"/>
        <link rel="up" title="General" href="general.html"/>
        <link rel="next" title="Import Dialog" href="import.html"/>
        <link rel="prev" title="Constants" href="consts.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> VOCAL</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Program Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overview.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview.html#additional-information">Additional Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../packages.html">Required Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#windows">Windows </a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#linux">Linux </a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#os-x">OS X </a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gettingdata.html">Getting the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supporteddata.html">Supported Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#interface-layout">Interface Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#starting-up">Starting Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#navigating-the-plot">Navigating the Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#viewing-properties-of-shapes">Viewing Properties of Shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#drawing-shapes">Drawing Shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#hiding-and-sharing-specific-shapes">Hiding and Sharing Specific Shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#using-the-database">Using the Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#extracting-column-data-from-the-database">Extracting Column Data from the Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#sharing-your-database">Sharing Your Database</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dev/conventions.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/enviroment.html">Development Enviroment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/docs.html">Building and Writing Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/site.html">Updating The Site</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Code Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../polygon/polygon.html">Polygon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/tools.html">Tools</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/faq.html">Troubleshoot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/issuetracker.html">Submit Bugs or Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble/contact.html">Contact</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">VOCAL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../modules.html">Code Documentation</a> &raquo;</li>
      
          <li><a href="general.html">General</a> &raquo;</li>
      
    <li>Database</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/doc/general/db.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="database">
<h1>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h1>
<p class="graphviz">
<img src="../../_images/inheritance-49898e56a36712fe121ae78a55b948602c7a4d10.png" alt="Inheritance diagram of db" usemap="#inheritance53bde99ac8" class="inheritance"/>
<map id="inheritance53bde99ac8" name="inheritance53bde99ac8">
<area shape="rect" id="node1" href="#db.DatabaseManager" title="Internally manages the database engine and any sql related objects." alt="" coords="48,55,193,80"/>
<area shape="rect" id="node2" href="#db.DatabasePolygon" title="Sqlalchemy class object, contains all data that is stored inside the database." alt="" coords="284,5,427,31"/>
</map>
</p>
<span class="target" id="module-db"></span><dl class="class">
<dt id="db.DatabaseManager">
<em class="property">class </em><code class="descname">DatabaseManager</code><a class="reference internal" href="../../_modules/db.html#DatabaseManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Internally manages the database engine and any sql related objects.
Hands out sessions with getSession() but only offers abstractions for
other functionality. The database is INDEPENDENT from the application</p>
<dl class="method">
<dt id="db.DatabaseManager.commit_to_db">
<code class="descname">commit_to_db</code><span class="sig-paren">(</span><em>poly_list</em>, <em>time</em>, <em>f</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.commit_to_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.commit_to_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of polygons and commits them into the database,
used in polygonList to commit all visible polygons</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>poly_list</strong> &#8211; the current polygonList corresponding to the active plot</li>
<li><strong>time</strong> &#8211; time of the JSON&#8217;s creation</li>
<li><strong>f</strong> &#8211; file name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.delete_item">
<code class="descname">delete_item</code><span class="sig-paren">(</span><em>idx</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.delete_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.delete_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a session and delete the object from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>idx</strong> &#8211; the primary key for the object passed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.dump_to_json">
<code class="descname">dump_to_json</code><span class="sig-paren">(</span><em>zip_fname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.dump_to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.dump_to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the contents of the database into a JSON file with the specific format
of DatabasePolygon. Creates a directory &#8216;{PROJECT}/tmp&#8217; and exports all db
objects to it, then zips the directory and deletes tmp. Returns <code class="docutils literal"><span class="pre">True</span></code> on
success, <code class="docutils literal"><span class="pre">False</span></code> otherwise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>zip_fname</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; name of the zip file</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="db.DatabaseManager.encode">
<em class="property">static </em><code class="descname">encode</code><span class="sig-paren">(</span><em>filename</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode and write out a JSON object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; name of the file</li>
<li><strong>data</strong> &#8211; Python dictionary representation of a JSON</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.exists_tag">
<code class="descname">exists_tag</code><span class="sig-paren">(</span><em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.exists_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.exists_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the database if a tag currently exists, if so return True, else
return False</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.get_session">
<code class="descname">get_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.get_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of a session, USERS job to ensure session
is committed/closed</p>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.import_from_json">
<code class="descname">import_from_json</code><span class="sig-paren">(</span><em>zip_fname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.import_from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.import_from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a <em>.zip</em> file selected by the user, the zip file must be
the same format as how <code class="docutils literal"><span class="pre">dump_to_json</span></code> creates a zip, otherwise
an error will be raised. Uses functionality similar to <code class="docutils literal"><span class="pre">ShapeReader</span></code>,
but as db should <strong>never</strong> be dependent on another class we need to
impl our own import method. The big difference here is that shapes
are not added to the current shape list, instead are only loaded into
the local database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="db.DatabaseManager.query_unique_tag">
<code class="descname">query_unique_tag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabaseManager.query_unique_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabaseManager.query_unique_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Grabs a session and queries the database to find the starting tag for the application.
this tag is used so it does not overlap existing shape tags previously generated
and stored into the database</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="db.DatabasePolygon">
<em class="property">class </em><code class="descname">DatabasePolygon</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/db.html#DatabasePolygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#db.DatabasePolygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy class object, contains all data that is stored inside the database.
Objects are represented as JSON</p>
<dl class="data">
<dt id="db.DatabasePolygon.id">
<code class="descname">id</code><a class="headerlink" href="#db.DatabasePolygon.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.tag">
<code class="descname">tag</code><a class="headerlink" href="#db.DatabasePolygon.tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.color">
<code class="descname">color</code><a class="headerlink" href="#db.DatabasePolygon.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.time_">
<code class="descname">time_</code><a class="headerlink" href="#db.DatabasePolygon.time_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.hdf">
<code class="descname">hdf</code><a class="headerlink" href="#db.DatabasePolygon.hdf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.plot">
<code class="descname">plot</code><a class="headerlink" href="#db.DatabasePolygon.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.attributes">
<code class="descname">attributes</code><a class="headerlink" href="#db.DatabasePolygon.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.coordinates">
<code class="descname">coordinates</code><a class="headerlink" href="#db.DatabasePolygon.coordinates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.DatabasePolygon.notes">
<code class="descname">notes</code><a class="headerlink" href="#db.DatabasePolygon.notes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="data">
<dt id="db.dbBase">
<code class="descname">dbBase</code><em class="property"> = &lt;class 'sqlalchemy.ext.declarative.api.Base'&gt;</em><a class="headerlink" href="#db.dbBase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="db.db">
<code class="descname">db</code><em class="property"> = &lt;db.DatabaseManager object at 0x07B39DD0&gt;</em><a class="headerlink" href="#db.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Internally manages the database engine and any sql related objects.
Hands out sessions with getSession() but only offers abstractions for
other functionality. The database is INDEPENDENT from the application</p>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="import.html" class="btn btn-neutral float-right" title="Import Dialog">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="consts.html" class="btn btn-neutral" title="Constants"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Grant Mercer, Nathan Qian.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

  <div>Icons made by <a href="http://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.15.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>